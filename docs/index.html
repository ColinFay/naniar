<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Structures, Summaries, and Visualisations for Missing Data • naniar</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">naniar</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="/index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/getting-started-w-naniar.html">Getting Started with naniar</a>
    </li>
    <li>
      <a href="articles/naniar-visualisation.html">Gallery of missing data visualisations with naniar + visdat</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/njtierney/naniar">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="naniar" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#naniar" class="anchor"></a>naniar</h1></div>

<p><code>naniar</code> aims to make it easy to summarise, visualise, and manipulate missing data with minimal deviations from the workflows in ggplot2 and tidy data.</p>
<p>Currently it provides:</p>
<ul>
<li>Data structures for missing data, e.g., <code><a href="reference/bind_shadow.html">bind_shadow()</a></code>
</li>
<li>Handy shorthand summaries for missing data: e.g., <code><a href="reference/n_miss.html">n_miss()</a></code>, <code>n_complete</code>, <code><a href="reference/prop_miss.html">prop_miss()</a></code>, <code>prop_complete</code>.</li>
<li>Numerical summaries of missing data: e.g., <code><a href="reference/miss_case_summary.html">miss_case_summary()</a></code>, <code><a href="reference/miss_case_table.html">miss_case_table()</a></code>, <code><a href="reference/miss_var_pct.html">miss_var_pct()</a></code>, <code><a href="reference/miss_var_summary.html">miss_var_summary()</a></code>, <code>miss_var_run</code>.</li>
<li>Visualisation methods: e.g., <code><a href="reference/geom_miss_point.html">geom_miss_point()</a></code>, <code><a href="reference/gg_miss_var.html">gg_miss_var()</a></code>,</li>
</ul>
<p>For details on all of these functions and how to use each of them, you can read the vignette <a href="http://naniar.njtierney.com/articles/getting-started-w-naniar.html">“Getting Started with naniar”</a>.</p>
<p>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div id="data-structures-for-missing-data" class="section level1">
<h1 class="hasAnchor">
<a href="#data-structures-for-missing-data" class="anchor"></a>Data structures for missing data</h1>
<p>Representing missing data structure is achieved using the shadow matrix, introduced in <a href="https://www.researchgate.net/publication/2758672_Missing_Data_in_Interactive_High-Dimensional_Data_Visualization">Swayne and Buja</a>. The shadow matrix is the same dimension as the data, and consists of binary indicators of missingness of data values, where missing is represented as “NA”, and not missing is represented as “!NA”. Although these may be represented as 1 and 0, respectively. This representation can be seen in the figure below, adding the suffix “_NA" to the variables. This structure can also be extended to allow for additional factor levels to be created. For example 0 indicates data presence, 1 indicates missing values, 2 indicates imputed value, and 3 might indicate a particular type or class of missingness, where reasons for missingness might be known or inferred. The data matrix can also be augmented to include the shadow matrix, which facilitates visualisation of univariate and bivariate missing data visualisations. Another format is to display it in long form, which facilitates heatmap style visualisations. This approach can be very helpful for giving an overview of which variables contain the most missingness. Methods can also be applied to rearrange rows and columns to find clusters, and identify other interesting features of the data that may have previously been hidden or unclear.</p>
<p><img src="missingness-data-structures.png" width="800px"></p>
<p><strong>Illustration of data structures for facilitating visualisation of missings and not missings</strong></p>
</div>
<div id="visualising-missing-data" class="section level1">
<h1 class="hasAnchor">
<a href="#visualising-missing-data" class="anchor"></a>Visualising missing data</h1>
<p>Visualising missing data might sound a little strange - how do you visualise something that is not there? One approach to visualising missing data comes from ggobi and manet, where we replace “NA” values with values 10% lower than the minimum value in that variable. This is provided with the <code><a href="reference/geom_miss_point.html">geom_miss_point()</a></code> ggplot2 geom, which we can illustrate by exploring the relationship between Ozone and Solar radiation from the airquality dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">library</span>(ggplot2)

<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> airquality,
       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Ozone,
           <span class="dt">y =</span> Solar.R)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>()
<span class="co">#&gt; Warning: Removed 42 rows containing missing values (geom_point).</span></code></pre></div>
<p><img src="README-figs/README-regular-geom-point-1.png" width="672"></p>
<p>ggplot2 does not handle these missing values, and we get a warning message about the missing values.</p>
<p>We can instead use the <code><a href="reference/geom_miss_point.html">geom_miss_point()</a></code> to display the missing data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">library</span>(naniar)

<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> airquality,
       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Ozone,
           <span class="dt">y =</span> Solar.R)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="reference/geom_miss_point.html">geom_miss_point</a></span>()</code></pre></div>
<p><img src="README-figs/README-geom-missing-point-1.png" width="672"></p>
<p><code><a href="reference/geom_miss_point.html">geom_miss_point()</a></code> has shifted the missing values to now be 10% below the minimum value. The missing values are a different colour so that missingness becomes pre-attentive.</p>
<p>This plays nicely with other parts of ggplot, like adding transparency</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> airquality,
       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Ozone,
           <span class="dt">y =</span> Solar.R)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="reference/geom_miss_point.html">geom_miss_point</a></span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</code></pre></div>
<p><img src="README-figs/README-geom-missing-point-alpha-1.png" width="672"></p>
<p>Thanks to Luke Smith for making this pull request.</p>
<p>We can also add features such as faceting, just like any regular ggplot plot.</p>
<p>For example, we can split the facet by month:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
p1 &lt;-
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> airquality,
       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Ozone,
           <span class="dt">y =</span> Solar.R)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/geom_miss_point.html">geom_miss_point</a></span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap">facet_wrap</a></span>(<span class="op">~</span>Month, <span class="dt">ncol =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/theme">theme</a></span>(<span class="dt">legend.position =</span> <span class="st">"bottom"</span>)

p1</code></pre></div>
<p><img src="README-figs/README-facet-by-month-1.png" width="672"></p>
<p>And then change the theme, just like you do with any other ggplot graphic</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
p1 <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_bw</a></span>()  </code></pre></div>
<p><img src="README-figs/README-facet-add-theme-1.png" width="672"></p>
<p>You can also look at the proportion of missings in each variable with gg_miss_var:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/gg_miss_var.html">gg_miss_var</a></span>(airquality)</code></pre></div>
<p><img src="README-figs/README-gg-missing-var-1.png" width="672"></p>
<p>The plots created with the <code>gg_miss</code> family all have a basic theme, but you can customise them, just like usual ggplot objects. If you call any ggplot customisation functions with a <code>gg_miss</code> object, the default args will be overridden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/gg_miss_var.html">gg_miss_var</a></span>(airquality) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_bw</a></span>() </code></pre></div>
<p><img src="README-figs/README-unnamed-chunk-3-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/gg_miss_var.html">gg_miss_var</a></span>(airquality) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/labs">labs</a></span>(<span class="dt">y =</span> <span class="st">"Look at all the missing ones"</span>)</code></pre></div>
<p><img src="README-figs/README-unnamed-chunk-3-2.png" width="672"></p>
<p>You can also explore the whole dataset of missings using the <code>vis_miss</code> function, which is exported from the <a href="github.com/ropensci/visdat"><code>visdat</code></a> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="http://www.rdocumentation.org/packages/visdat/topics/vis_miss">vis_miss</a></span>(airquality)</code></pre></div>
<p><img src="README-figs/README-viss-miss-1.png" width="672"></p>
<p>Another approach can be to use <strong>Univariate plots split by missingness</strong>. We can do this using the <code><a href="reference/bind_shadow.html">bind_shadow()</a></code> argument to place the data and shadow side by side. This allows for us to examine univariate distributions according to the presence or absence of another variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
aq_shadow &lt;-<span class="st"> </span><span class="kw"><a href="reference/bind_shadow.html">bind_shadow</a></span>(airquality)

aq_shadow
<span class="co">#&gt; # A tibble: 153 x 12</span>
<span class="co">#&gt;    Ozone Solar.R  Wind  Temp Month   Day Ozone_NA Solar.R_NA Wind_NA</span>
<span class="co">#&gt;    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;  &lt;fctr&gt;</span>
<span class="co">#&gt;  1    41     190   7.4    67     5     1      !NA        !NA     !NA</span>
<span class="co">#&gt;  2    36     118   8.0    72     5     2      !NA        !NA     !NA</span>
<span class="co">#&gt;  3    12     149  12.6    74     5     3      !NA        !NA     !NA</span>
<span class="co">#&gt;  4    18     313  11.5    62     5     4      !NA        !NA     !NA</span>
<span class="co">#&gt;  5    NA      NA  14.3    56     5     5       NA         NA     !NA</span>
<span class="co">#&gt;  6    28      NA  14.9    66     5     6      !NA         NA     !NA</span>
<span class="co">#&gt;  7    23     299   8.6    65     5     7      !NA        !NA     !NA</span>
<span class="co">#&gt;  8    19      99  13.8    59     5     8      !NA        !NA     !NA</span>
<span class="co">#&gt;  9     8      19  20.1    61     5     9      !NA        !NA     !NA</span>
<span class="co">#&gt; 10    NA     194   8.6    69     5    10       NA        !NA     !NA</span>
<span class="co">#&gt; # ... with 143 more rows, and 3 more variables: Temp_NA &lt;fctr&gt;,</span>
<span class="co">#&gt; #   Month_NA &lt;fctr&gt;, Day_NA &lt;fctr&gt;</span></code></pre></div>
<p>The plot below shows the values of temperature when ozone is present and missing, on the left is a faceted histogram, and on the right is an overlaid density.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">library</span>(ggplot2)

p1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> aq_shadow,
       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Temp)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_histogram">geom_histogram</a></span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap">facet_wrap</a></span>(<span class="op">~</span>Ozone_NA,
             <span class="dt">ncol =</span> <span class="dv">1</span>)

p2 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> aq_shadow,
       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Temp,
           <span class="dt">colour =</span> Ozone_NA)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_density">geom_density</a></span>() 

gridExtra<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/gridExtra/topics/arrangeGrob">grid.arrange</a></span>(p1, p2, <span class="dt">ncol =</span> <span class="dv">2</span>)
<span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></code></pre></div>
<p><img src="README-figs/README-bind-shadow-density-1.png" width="960"></p>
<p>The other plotting functions can be seen in the vignette, “Gallery of missing data visualisations with naniar”.</p>
</div>
<div id="handy-helpers-for-missing-data" class="section level1">
<h1 class="hasAnchor">
<a href="#handy-helpers-for-missing-data" class="anchor"></a>Handy helpers for missing data</h1>
<p>Users may be aware that you can find the number of missings in a structure using <code>sum(is.na(x))</code>, or find the proportion of missings with <code>mean(is.na(x))</code>. to make this is a bit easier to think about and reason with, we introduce more intuitive helpers:</p>
<ul>
<li>
<code><a href="reference/n_miss.html">n_miss()</a></code> / <code><a href="reference/n_complete.html">n_complete()</a></code> return the number of missings or complete values</li>
<li>
<code><a href="reference/prop_miss.html">prop_miss()</a></code> / <code><a href="reference/prop_complete.html">prop_complete()</a></code> return the proportion of missing or complete values.</li>
<li>
<code><a href="reference/pct_miss.html">pct_miss()</a></code> / <code><a href="reference/pct_complete.html">pct_complete()</a></code> likewise return the percentage of missing or complete values.</li>
</ul>
</div>
<div id="numerical-summaries-for-missing-data" class="section level1">
<h1 class="hasAnchor">
<a href="#numerical-summaries-for-missing-data" class="anchor"></a>Numerical summaries for missing data</h1>
<p><code>naniar</code> provides numerical summaries of missing data starting with <code>miss_</code>. Summaries focussing on variables or a single selected variable, start with <code>miss_var_</code>, and summaries for cases (the initial collected row order of the data), they start with <code>miss_case_</code>. All of these functions also “just work” with dplyr’s <code><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>.</p>
<p>For example, we can look at the number and percent of missings in each case and variable with <code><a href="reference/miss_var_summary.html">miss_var_summary()</a></code>, and <code><a href="reference/miss_case_summary.html">miss_case_summary()</a></code>, which both return output ordered by the number of missing values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/miss_var_summary.html">miss_var_summary</a></span>(airquality)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   variable n_missing   percent</span>
<span class="co">#&gt;      &lt;chr&gt;     &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1    Ozone        37 24.183007</span>
<span class="co">#&gt; 2  Solar.R         7  4.575163</span>
<span class="co">#&gt; 3     Wind         0  0.000000</span>
<span class="co">#&gt; 4     Temp         0  0.000000</span>
<span class="co">#&gt; 5    Month         0  0.000000</span>
<span class="co">#&gt; 6      Day         0  0.000000</span>
<span class="kw"><a href="reference/miss_case_summary.html">miss_case_summary</a></span>(airquality)
<span class="co">#&gt; # A tibble: 153 x 3</span>
<span class="co">#&gt;     case n_missing  percent</span>
<span class="co">#&gt;    &lt;int&gt;     &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     5         2 33.33333</span>
<span class="co">#&gt;  2    27         2 33.33333</span>
<span class="co">#&gt;  3     6         1 16.66667</span>
<span class="co">#&gt;  4    10         1 16.66667</span>
<span class="co">#&gt;  5    11         1 16.66667</span>
<span class="co">#&gt;  6    25         1 16.66667</span>
<span class="co">#&gt;  7    26         1 16.66667</span>
<span class="co">#&gt;  8    32         1 16.66667</span>
<span class="co">#&gt;  9    33         1 16.66667</span>
<span class="co">#&gt; 10    34         1 16.66667</span>
<span class="co">#&gt; # ... with 143 more rows</span></code></pre></div>
<p>You could also <code><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> to work out the number of missings in each variable across the levels within it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
airquality <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(Month) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/miss_var_summary.html">miss_var_summary</a></span>()
<span class="co">#&gt; # A tibble: 25 x 4</span>
<span class="co">#&gt;    Month variable n_missing  percent</span>
<span class="co">#&gt;    &lt;int&gt;    &lt;chr&gt;     &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     5    Ozone         5 16.12903</span>
<span class="co">#&gt;  2     5  Solar.R         4 12.90323</span>
<span class="co">#&gt;  3     5     Wind         0  0.00000</span>
<span class="co">#&gt;  4     5     Temp         0  0.00000</span>
<span class="co">#&gt;  5     5      Day         0  0.00000</span>
<span class="co">#&gt;  6     6    Ozone        21 70.00000</span>
<span class="co">#&gt;  7     6  Solar.R         0  0.00000</span>
<span class="co">#&gt;  8     6     Wind         0  0.00000</span>
<span class="co">#&gt;  9     6     Temp         0  0.00000</span>
<span class="co">#&gt; 10     6      Day         0  0.00000</span>
<span class="co">#&gt; # ... with 15 more rows</span></code></pre></div>
<p>To find the percent missing variables and cases:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># Proportion of variables that contain any missing values</span>
<span class="kw"><a href="reference/miss_var_pct.html">miss_var_pct</a></span>(airquality)
<span class="co">#&gt; [1] 33.33333</span>
 <span class="co"># Proportion of cases that contain any missing values</span>
<span class="kw"><a href="reference/miss_case_pct.html">miss_case_pct</a></span>(airquality)
<span class="co">#&gt; [1] 27.45098</span>
<span class="co"># Proportion elements in dataset that contains missing values</span>
<span class="kw"><a href="reference/prop_miss.html">prop_miss</a></span>(airquality)
<span class="co">#&gt; [1] 0.04793028</span></code></pre></div>
<p>Tabulations of the number of missings in each case or variable can be calculated with <code><a href="reference/miss_var_table.html">miss_var_table()</a></code> and <code><a href="reference/miss_case_table.html">miss_case_table()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/miss_var_table.html">miss_var_table</a></span>(airquality)
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   n_missing_in_var n_vars  percent</span>
<span class="co">#&gt;              &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1                0      4 66.66667</span>
<span class="co">#&gt; 2                7      1 16.66667</span>
<span class="co">#&gt; 3               37      1 16.66667</span>
<span class="kw"><a href="reference/miss_case_table.html">miss_case_table</a></span>(airquality)
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   n_missing_in_case n_cases  percent</span>
<span class="co">#&gt;               &lt;int&gt;   &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1                 0     111 72.54902</span>
<span class="co">#&gt; 2                 1      40 26.14379</span>
<span class="co">#&gt; 3                 2       2  1.30719</span></code></pre></div>
<p>Most of these functions can be called at once using <code><a href="reference/miss_summary.html">miss_summary()</a></code>, which takes a data.frame and then returns a nested dataframe containing the percentages of missing data, and lists of dataframes containing tally and summary information for the variables and cases.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
s_miss &lt;-<span class="st"> </span><span class="kw"><a href="reference/miss_summary.html">miss_summary</a></span>(airquality)

s_miss
<span class="co">#&gt; # A tibble: 1 x 9</span>
<span class="co">#&gt;   miss_df_prop miss_var_prop miss_case_prop  miss_case_table</span>
<span class="co">#&gt;          &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;           &lt;list&gt;</span>
<span class="co">#&gt; 1   0.04793028     0.3333333      0.2745098 &lt;tibble [3 x 3]&gt;</span>
<span class="co">#&gt; # ... with 5 more variables: miss_var_table &lt;list&gt;,</span>
<span class="co">#&gt; #   miss_var_summary &lt;list&gt;, miss_case_summary &lt;list&gt;,</span>
<span class="co">#&gt; #   miss_var_cumsum &lt;list&gt;, miss_case_cumsum &lt;list&gt;</span>

<span class="co"># overall % missing data</span>
s_miss<span class="op">$</span>percent_missing_df
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'percent_missing_df'.</span>
<span class="co">#&gt; NULL</span>

<span class="co"># % of variables that contain missing data</span>
s_miss<span class="op">$</span>percent_missing_var
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'percent_missing_var'.</span>
<span class="co">#&gt; NULL</span>

<span class="co"># % of cases that contain missing data</span>
s_miss<span class="op">$</span>percent_missing_case
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'percent_missing_case'.</span>
<span class="co">#&gt; NULL</span>

<span class="co"># tabulations of missing data across cases</span>
s_miss<span class="op">$</span>table_missing_case
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'table_missing_case'.</span>
<span class="co">#&gt; NULL</span>

<span class="co"># tabulations of missing data across variables</span>
s_miss<span class="op">$</span>table_missing_var
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'table_missing_var'.</span>
<span class="co">#&gt; NULL</span>

<span class="co"># summary information (counts, percentrages) of missing data for variables and cases</span>
s_miss<span class="op">$</span>summary_missing_var
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'summary_missing_var'.</span>
<span class="co">#&gt; NULL</span>
s_miss<span class="op">$</span>summary_missing_case
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'summary_missing_case'.</span>
<span class="co">#&gt; NULL</span></code></pre></div>
</div>
<div id="other-plotting-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#other-plotting-functions" class="anchor"></a>Other plotting functions</h1>
<div id="gg_miss_var" class="section level2">
<h2 class="hasAnchor">
<a href="#gg_miss_var" class="anchor"></a>gg_miss_var</h2>
<p>Display the amount of missing data for each variable</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/gg_miss_var.html">gg_miss_var</a></span>(airquality)</code></pre></div>
<p><img src="README-figs/README-unnamed-chunk-4-1.png" width="672"></p>
</div>
<div id="gg_miss_case" class="section level2">
<h2 class="hasAnchor">
<a href="#gg_miss_case" class="anchor"></a>gg_miss_case</h2>
<p>Display the amount of missing data for each case</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/gg_miss_case.html">gg_miss_case</a></span>(airquality)</code></pre></div>
<p><img src="README-figs/README-unnamed-chunk-5-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/gg_miss_which.html">gg_miss_which</a></span>(airquality)</code></pre></div>
<p><img src="README-figs/README-unnamed-chunk-6-1.png" width="672"></p>
</div>
<div id="gg_miss_case_cumsum" class="section level2">
<h2 class="hasAnchor">
<a href="#gg_miss_case_cumsum" class="anchor"></a>gg_miss_case_cumsum</h2>
<p>This shows a lineplot of the cumulative sum of missing values for the cases, kindly contributed by Colin Fay.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/gg_miss_case_cumsum.html">gg_miss_case_cumsum</a></span>(airquality)</code></pre></div>
<p><img src="README-figs/README-gg-miss-case-cumsum-1.png" width="672"></p>
</div>
<div id="gg_miss_var_cumsum" class="section level2">
<h2 class="hasAnchor">
<a href="#gg_miss_var_cumsum" class="anchor"></a>gg_miss_var_cumsum</h2>
<p>This shows a lineplot of the cumulative sum of missing values for variables, kindly contributed by Colin Fay.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="reference/gg_miss_var_cumsum.html">gg_miss_var_cumsum</a></span>(airquality)</code></pre></div>
<p><img src="README-figs/README-gg-miss-var-cumsum-1.png" width="672"></p>
</div>
<div id="gg_miss_which" class="section level2">
<h2 class="hasAnchor">
<a href="#gg_miss_which" class="anchor"></a>gg_miss_which</h2>
<p>This shows whether a given variable contains a missing variable. In this case grey = missing. Think of it as if you are shading the cell in, if it contains data.</p>
</div>
</div>
<div id="a-note-on-the-name" class="section level1">
<h1 class="hasAnchor">
<a href="#a-note-on-the-name" class="anchor"></a>A note on the name</h1>
<p><strong>Why <code>naniar</code>?</strong></p>
<p><code>naniar</code> was previously named <code>ggmissing</code> and initially provided a ggplot geom and some other visualisations. <code>ggmissing</code> was changed to <code>naniar</code> to reflect the fact that this package is going to be bigger in scope, and is not just related to ggplot2. Specifically, the package is designed to provide a suite of tools for generating visualisations of missing values and imputations, manipulate, and summarise missing data.</p>
<blockquote>
<p>…But <em>why</em> <code>naniar</code>?</p>
</blockquote>
<p>Well, I think it is useful to think of missing values in data being like this other dimension, perhaps like <a href="https://en.wikipedia.org/wiki/The_Chronicles_of_naniar">C.S. Lewis’s Narnia</a> - a different world, hidden away. You go inside, and sometimes it seems like you’ve spent no time in there but time has passed very quickly, or the opposite. Also, <code>NA</code>niar = na in r, and if you so desire, naniar may sound like “noneoya” in an nz/aussie accent. Full credit to <span class="citation">@MilesMcbain</span> for the name, and <span class="citation">@Hadley</span> for the rearranged spelling.</p>
</div>
<div id="future-work" class="section level1">
<h1 class="hasAnchor">
<a href="#future-work" class="anchor"></a>Future Work</h1>
<p>Other plans to extend the <code>geom_miss_</code> family to include:</p>
<ul>
<li>Categorical variables</li>
<li>Bivariate plots: scatterplots, density overlays</li>
<li>SQL translation for databases</li>
<li>Big Data tools (sparklyr, sparklingwater)</li>
<li>Work well with other imputation engines / processes</li>
<li>Provide tools for assessing goodness of fit for classical approaches of MCAR, MAR, and MNAR (graphical inference from <code>nullabor</code> package)</li>
<li>Expand ggplot <code>geom_miss_*</code> family</li>
</ul>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>Firstly, thanks to <span class="citation">@dicook</span> for giving the initial inspiration for the package and laying down the rich theory and literature that the work in <code>naniar</code> is built upon. Naming credit (once again!) goes to <span class="citation">@MilesMcBain</span>. Among various other things, Miles also worked out how to overload the missing data and make it work as a geom. Thanks also to Colin Fay <span class="citation">@colinfay</span> for helping me understand tidy evaluation and for features such as <code>replace_to_na</code>, <code>miss_*_cumsum</code>, and more.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/njtierney/naniar">https://​github.com/​njtierney/​naniar</a>
</li>
<li>Report a bug at <br><a href="https://github.com/njtierney/naniar/issues">https://​github.com/​njtierney/​naniar/​issues</a>
</li>
<li>Learn more at <br><a href="https://github.com/njtierney/naniar">https://​github.com/​njtierney/​naniar</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicholas Tierney <br><small class="roles"> Author, maintainer </small> </li>
<li>Di Cook <br><small class="roles"> Author </small> </li>
<li>Miles McBain <br><small class="roles"> Author </small> </li>
<li>Colin Fay <br><small class="roles"> Author </small> </li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://ci.appveyor.com/project/njtierney/naniar"><img src="https://ci.appveyor.com/api/projects/status/github/njtierney/naniar?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://travis-ci.org/njtierney/naniar"><img src="https://travis-ci.org/njtierney/naniar.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/github/njtierney/naniar?branch=master"><img src="https://img.shields.io/codecov/c/github/njtierney/naniar/master.svg" alt="Coverage Status"></a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney, Di Cook, Miles McBain, Colin Fay.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
